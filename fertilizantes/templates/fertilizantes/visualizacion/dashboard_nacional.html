{% extends 'fertilizantes/base.html' %}
{% load static %}

{% block title %}Avance Nacional{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
  
  <div class="text-center mb-4">
    <h2 class="fw-bold text-dark">Avance Nacional {{ anio_actual }}</h2>
    <div class="d-inline-flex align-items-center gap-2">
      <span class="badge rounded-pill" style="background-color: #002f2a; font-size: 0.9rem;">
        Operaci칩n: {{ anio_actual }}
      </span>
      <a href="{% url 'seleccionar_anio' %}" class="btn btn-sm btn-outline-secondary rounded-pill" style="font-size: 0.8rem;">
        Cambiar a침o
      </a>
    </div>
  </div>

  <div class="card shadow-sm border-0 mb-4 bg-light">
    <div class="card-body py-3">
      <form id="filtros-form" class="row g-3 align-items-end justify-content-center">
        <div class="col-md-3">
          <label class="form-label small fw-bold text-muted">Unidad Operativa</label>
          <select name="unidad_operativa" id="unidad_operativa" class="form-select border-0 shadow-sm"></select>
        </div>
        <div class="col-md-3">
          <label class="form-label small fw-bold text-muted">Estado</label>
          <select name="estado" id="estado" class="form-select border-0 shadow-sm"></select>
        </div>
        <div class="col-md-3">
          <label class="form-label small fw-bold text-muted">Tipo de Meta</label>
          <select name="tipo_meta" class="form-select border-0 shadow-sm">
            <option value="operativa">Meta Operativa</option>
            <option value="oficial">Meta Oficial</option>
          </select>
        </div>
        <div class="col-md-2">
          <button type="submit" class="btn btn-primary w-100 shadow-sm" style="background-color: #264e46;">
            <i class="bi bi-filter"></i> Filtrar
          </button>
        </div>
      </form>
    </div>
  </div>

  <div class="row" id="kpi-cards">
    <div class="col-12 text-center py-5">
      <div class="spinner-border text-secondary" role="status"></div>
      <p class="text-muted mt-2">Cargando indicadores...</p>
    </div>
  </div>

  <div class="mt-4 text-muted small">
    <details>
      <summary class="fw-bold cursor-pointer">Notas metodol칩gicas</summary>
      <ul class="mt-2">
        <li>Las metas se basan en el padr칩n validado para el ejercicio {{ anio_actual }}.</li>
        <li>El avance de entrega se actualiza en tiempo real desde la base operativa.</li>
      </ul>
    </details>
  </div>

</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/chart.umd.min.js' %}"></script>
<script src="{% static 'js/dashboards.js' %}"></script>
{% endblock %}